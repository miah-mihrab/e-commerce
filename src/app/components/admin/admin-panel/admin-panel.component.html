<app-navbar></app-navbar>
<div class="container mt-5">
  <div id="allProducts" *ngIf="allProducts">
    <h6 class="display-4 text-center">All Products</h6>
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Product</th>
          <th scope="col">Type</th>
          <th scope="col">Company</th>
          <th scope="col">Price</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let product of allProducts | paginate: { itemsPerPage: 5, currentPage: p }; let i=index">
          <tr>
            <td [routerLink]="['/edit/product', product['id']]" style="cursor: pointer;">
              {{ product['data']['Name'] }}</td>
            <td>{{ product['data']['Type'] }}</td>
            <td>{{ product['data']['Company'] }}</td>
            <td>{{ product['data']['Price'] }}</td>
            <td><button class="btn btn-sm btn-outline-danger" (click)="removeProduct(product['id'])">Remove</button>
            </td>
          </tr>
        </ng-container>
      </tbody>
      <pagination-controls (pageChange)="p = $event"></pagination-controls>

    </table>
  </div>
  <button class="btn btn-outline-dark btn-sm mb-4" type="button" data-toggle="collapse" data-target="#addProduct"
    style="font-size: 1.4rem;">
    Add Product To Database
  </button>

  <div class="collapse" id="addProduct">
    <form class="form-horizontal" [formGroup]="productForm" (submit)="addProduct()">
      <div class="form-group">
        <label class="control-label col-sm-2" for="name">Name:</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="name" placeholder="Product Name" formControlName="Name"
            pattern="[a-zA-Z ]*" />
          <div
            *ngIf="productForm.get('Name').invalid && (productForm.get('Name').dirty || productForm.get('Name').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Name').errors.required"> * Name is required.</div>
            <div *ngIf=" productForm.get('Name').errors.minlength || productForm.get('Name').errors.maxlength">
              *
              Minimum length 5 &
              Maximum length 30
            </div>
            <div *ngIf="productForm.get('Name').errors.pattern">* Should not any special character or number
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="type">Type</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="type" placeholder="Product Type ex: dress"
            formControlName="Type" />
          <div
            *ngIf="productForm.get('Type').invalid && (productForm.get('Type').dirty || productForm.get('Type').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Type').errors.required">
              * Type is required.
            </div>
            <div *ngIf="productForm.get('Type').errors.minlength || productForm.get('Type').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Type').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="company">Company</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="company" placeholder="Company" formControlName="Company" />
          <div
            *ngIf="productForm.get('Company').invalid && (productForm.get('Company').dirty || productForm.get('Company').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Company').errors.required">
              * Company is required
            </div>
            <div *ngIf="productForm.get('Company').errors.minlength || productForm.get('Company').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Company').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>

        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="port">Port</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="port" placeholder="Shenzhen, China" formControlName="Port" />
          <div
            *ngIf="productForm.get('Port').invalid && (productForm.get('Port').dirty || productForm.get('Port').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Port').errors.required"> * Port is required.</div>

            <div *ngIf="productForm.get('Port').errors.minlength || productForm.get('Port').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Port').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>

        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="color">Color</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="color" placeholder="Red, Green etc" formControlName="Color" />
          <div
            *ngIf="productForm.get('Color').invalid && (productForm.get('Color').dirty || productForm.get('Color').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Color').errors.required"> * Color is required.</div>

            <div *ngIf="productForm.get('Color').errors.minlength || productForm.get('Color').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Color').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>

        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-2" for="waterproof">Waterproof</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="waterproof" placeholder="False" formControlName="Waterproof" />
          <div
            *ngIf="productForm.get('Waterproof').invalid && (productForm.get('Waterproof').dirty || productForm.get('Waterproof').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Waterproof').errors.required"> * Is waterproof required.</div>
            <div
              *ngIf="productForm.get('Waterproof').errors.minlength || productForm.get('Waterproof').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Waterproof').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>

        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="price">Price</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="price" placeholder="$0.00" formControlName="Price" />
          <div
            *ngIf="productForm.get('Price').invalid && (productForm.get('Price').dirty || productForm.get('Price').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Price').errors.required"> * Price is required.</div>

            <div *ngIf="productForm.get('Price').errors.minlength || productForm.get('Price').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Price').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>

        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="certification">Certification</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="certification" placeholder="RoHS, CE, ISO, CCC, SGS"
            formControlName="Certification" />
          <div
            *ngIf="productForm.get('Certification').invalid && (productForm.get('Certification').dirty || productForm.get('Certification').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Certification').errors.required"> * Certification is required.</div>
            <div
              *ngIf="productForm.get('Certification').errors.minlength || productForm.get('Certification').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Certification').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>

        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-sm-2" for="style">Style</label>
        <div class="col-lg">
          <input type="text" class="form-control" id="style" placeholder="Modern" formControlName="Style" />
          <div
            *ngIf="productForm.get('Style').invalid && (productForm.get('Style').dirty || productForm.get('Style').touched)"
            class="alert alert-danger">
            <div *ngIf="productForm.get('Style').errors.required"> * Style is required.</div>

            <div *ngIf="productForm.get('Style').errors.minlength || productForm.get('Style').errors.maxlength">
              * Minimum length 5 & Maximum length 10
            </div>
            <div *ngIf="productForm.get('Style').errors.pattern">
              * Should not contain any special character or number
            </div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-lg">
          <input type="file" (change)="upload($event)" accept="image/*" required>
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-2 col-lg">
          <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid">Add Product</button>
        </div>
      </div>
    </form>


    <div class="progress" *ngIf="uploading">
      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75"
        aria-valuemin="0" aria-valuemax="100" [style.width]="uploadPercentage"></div>
    </div>
  </div>

</div>
